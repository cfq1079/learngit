(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/seat/seat"],{"5e4f":function(t,e,r){"use strict";r.r(e);var s=r("75f7"),a=r("984f");for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);r("f29c");var o,n=r("f0c5"),u=Object(n["a"])(a["default"],s["b"],s["c"],!1,null,"1485e5c2",null,!1,s["a"],o);e["default"]=u.exports},"75f7":function(t,e,r){"use strict";var s,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];r.d(e,"b",function(){return a}),r.d(e,"c",function(){return i}),r.d(e,"a",function(){return s})},"984f":function(t,e,r){"use strict";r.r(e);var s=r("afe2"),a=r.n(s);for(var i in s)"default"!==i&&function(t){r.d(e,t,function(){return s[t]})}(i);e["default"]=a.a},afe2:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={data:function(){return{scaleMin:1,boxWidth:400,space:" ",seatArray:[],seatRow:0,seatCol:0,seatSize:0,SelectNum:0,moveX:0,scale:1,minRow:0,minCol:0,showTis:!0,seatList:[],mArr:[],optArr:[],isWXAPP:!1}},computed:{aPrice:function(){return 36*this.SelectNum},rpxNum:function(){return this.boxWidth/750},pxNum:function(){return 750/this.boxWidth}},onLoad:function(){t.getSystemInfo({success:function(t){this.boxWidth=t.screenWidth}}),this.initData()},methods:{initData:function(){var t=seatData,e=0,r=0,s=parseInt(t[0].XCoord),a=parseInt(t[0].YCoord),i=!0,o=!1,n=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var h=u.value;a=parseInt(h.YCoord)<a?parseInt(h.YCoord):a,s=parseInt(h.XCoord)<s?parseInt(h.XCoord):s,e=parseInt(h.YCoord)>e?parseInt(h.YCoord):e,r=parseInt(h.XCoord)>r?parseInt(h.XCoord):r}}catch(f){o=!0,n=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw n}}this.seatList=t,this.seatRow=e-a+1,this.seatCol=r-s+3,this.minRow=a,this.minCol=s-1,this.initSeatArray()},initSeatArray:function(){var t=this,e=Array(this.seatRow).fill(0).map(function(){return Array(t.seatCol).fill({type:-1,SeatCode:"",RowNum:"",ColumnNum:""})});this.seatArray=e,this.seatSize=this.boxWidth>0?parseInt(parseInt(this.boxWidth,10)/(this.seatCol+1),10):parseInt(parseInt(414,10)/(this.seatCol+1),10),this.initNonSeatPlace()},initNonSeatPlace:function(){var t=this.seatList.slice(),e=this.seatArray.slice();for(var r in t){var s=2;0===t[r].Status?s=0:-1===t[r].Status&&(s=-1),e[parseInt(t[r].YCoord)-this.minRow][parseInt(t[r].XCoord)-this.minCol]={type:s,SeatCode:t[r].SeatCode,RowNum:t[r].RowNum,ColumnNum:t[r].ColumnNum}}this.seatArray=e.slice();var a=[];for(var i in e){var o="",n=!0,u=!1,c=void 0;try{for(var h,f=e[i][Symbol.iterator]();!(n=(h=f.next()).done);n=!0){var l=h.value;l.SeatCode&&(o=l.RowNum)}}catch(d){u=!0,c=d}finally{try{n||null==f.return||f.return()}finally{if(u)throw c}}o?a.push(o):a.push("")}this.mArr=a},onScale:function(t){this.showTis=!1;var e=.5*this.boxWidth,r=1-t.detail.scale;this.moveX=e*r,this.scale=t.detail.scale,(r>0||0===r)&&(this.showTis=!0)},onMove:function(t){this.showTis=!1,this.moveX=t.detail.x},resetSeat:function(){this.SelectNum=0,this.optArr=[];for(var t=this.seatArray.slice(),e=0;e<this.seatRow;e++)for(var r=0;r<this.seatCol;r++)1===t[e][r].type&&(t[e][r].type=0);this.seatArray=t},buySeat:function(){if(0!==this.SelectNum)for(var t=[],e=0;e<this.seatRow;e++)for(var r=0;r<this.seatCol;r++)1===this.seatArray[e][r].type&&t.push(this.seatArray[e][r].SeatCode)},handleChooseSeat:function(t,e){var r=this.seatArray[t][e].type,s=this.seatArray;2!==r&&-1!==r&&(1===r?(s[t][e].type=0,this.SelectNum--,this.getOptArr(s[t][e],0)):0===r&&(s[t][e].type=1,this.SelectNum++,this.getOptArr(s[t][e],1)),this.seatArray=s.slice())},getOptArr:function(t,e){var r=this.optArr;if(1===e)r.push(t);else if(0===e){var s=[];r.forEach(function(e){e.SeatCode!==t.SeatCode&&s.push(e)}),r=s}this.optArr=r.slice()},smartChoose:function(t){console.log("num===",t),this.resetSeat();var e=parseInt((this.seatRow-1)/2,10)+1,r=this.searchSeatByDirection(e,this.seatRow-1,t);if(r.length>0)return this.chooseSeat(r),void(this.SelectNum+=t);var s=this.searchSeatByDirection(e-1,0,t);if(s.length>0)return this.chooseSeat(s),void(this.SelectNum+=t);alert("无合法位置可选!")},searchSeatByDirection:function(t,e,r){for(var s=[],a=t>e?t:e,i=t>e?e:t,o=i;o<=a;o++){for(var n=[],u=1/0,c=0;c<=this.seatCol-r;c++)if(this.checkRowSeatContinusAndEmpty(o,c,c+r-1)){var h=parseInt(c+r/2,10),f=Math.abs(parseInt(this.seatCol/2)-h);f<u&&(u=f,n=this.generateRowResult(o,c,c+r-1))}s.push({result:n,offset:u})}var l=t<e,d=[],p=1/0;return l?s.forEach(function(t){t.offset<p&&(d=t.result,p=t.offset)}):s.reverse().forEach(function(t){t.offset<p&&(d=t.result,p=t.offset)}),d},checkRowSeatContinusAndEmpty:function(t,e,r){for(var s=!0,a=e;a<=r;a++)if(0!==this.seatArray[t][a].type){s=!1;break}return s},generateRowResult:function(t,e,r){for(var s=[],a=e;a<=r;a++)s.push([t,a]);return s},chooseSeat:function(t){this.optArr;for(var e=this.seatArray.slice(),r=0;r<t.length;r++)e[t[r][0]][t[r][1]].type=1,this.optArr.push(e[t[r][0]][t[r][1]]);this.seatArray=e}}};e.default=r}).call(this,r("543d")["default"])},cbca:function(t,e,r){},e9d4:function(t,e,r){"use strict";(function(t){r("bcd9"),r("921b");s(r("66fd"));var e=s(r("5e4f"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},f29c:function(t,e,r){"use strict";var s=r("cbca"),a=r.n(s);a.a}},[["e9d4","common/runtime","common/vendor"]]]);